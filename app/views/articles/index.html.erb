<h1>文章列表</h1>

<ul>
<% @articles.each do |article|%>
    <li>
        <%= link_to article.title, article_path(article.id)%>
        <article>
            <p>
            <% if article.password.present?%>
                <%= form_with(model: article,
                                url: unlock_article_path(article),
                                data: { turbo: false}) do |f| %>
                <%= f.label :password, "輸入密碼"%>
                <%= f.password_field :password%>
                <%= f.submit "送出"%>
                <% end %>
            <% else %>
                <%= article.content.truncate(50)%>
            <% end %>
            </p>
            <footer><%= link_to "繼續閱讀", article_path(article.id)%></footer>
        </article>
        <%= link_to "編輯", edit_article_path(article) %>
        <%= link_to "刪除", article_path(article.id), 
                                data: { 
                                turbo_method: 'delete',
                                turbo_confirm: '確定要刪除嗎？'
                                } %>
    </li>
<% end %>
</ul>